// HspppSample/UserApp.cpp
// ═══════════════════════════════════════════════════════════════════
// HSPPP デモ: HSP型 vs オブジェクト指向型の比較
// ═══════════════════════════════════════════════════════════════════

import hsppp;
using namespace hsppp;

// ユーザーのエントリーポイント
int hspMain() {

    // ╔═══════════════════════════════════════════════════════════════╗
    // ║  ウィンドウ0: HSP互換スタイル（グローバル関数）              ║
    // ╚═══════════════════════════════════════════════════════════════╝
    // 
    // HSPと同じ書き方！ screen命令でウィンドウを作成し、
    // グローバル関数で描画する従来のスタイル
    
    screen(0, 400, 400, {}, 100, 100, {}, {}, "HSP Style (Window 0)");
    
    redraw(0);  // 描画開始

    // 背景を薄い青で塗りつぶし
    color(200, 220, 255);
    boxf();

    // タイトル
    color(0, 0, 128);
    pos(20, 20);
    mes("=== HSP Compatible Style ===");

    // 説明
    color(0, 0, 0);
    pos(20, 60);
    mes("screen(0, 400, 400);");
    pos(20, 85);
    mes("color(255, 0, 0);");
    pos(20, 110);
    mes("boxf(50, 150, 150, 250);");
    pos(20, 135);
    mes("mes(\"Hello!\");");

    // 赤い四角形
    color(255, 0, 0);
    boxf(50, 180, 150, 280);

    // 緑の四角形
    color(0, 200, 0);
    boxf(100, 220, 200, 320);

    // 青い四角形
    color(0, 0, 255);
    boxf(150, 260, 250, 360);

    // ラベル
    color(255, 255, 255);
    pos(60, 200);
    mes("HSP!");

    redraw(1);  // 画面に反映

    // ╔═══════════════════════════════════════════════════════════════╗
    // ║  ウィンドウ1: オブジェクト指向スタイル（Screen クラス）      ║
    // ╚═══════════════════════════════════════════════════════════════╝
    // 
    // C++らしい書き方！ screen() の戻り値を受け取り、
    // メソッドチェーンで描画するモダンなスタイル
    
    auto win1 = screen(1, 400, 400, {}, 520, 100, {}, {}, "OOP Style (Window 1)");

    win1.redraw(0);  // 描画開始

    // 背景を薄い緑で塗りつぶし（メソッドチェーン）
    win1.color(220, 255, 220)
        .boxf();

    // タイトル
    win1.color(0, 128, 0)
        .pos(20, 20)
        .mes("=== Object-Oriented Style ===");

    // 説明
    win1.color(0, 0, 0)
        .pos(20, 60)
        .mes("auto win = screen(1, 400, 400);")
        .pos(20, 85)
        .mes("win.color(255, 0, 0)")
        .pos(20, 110)
        .mes("   .boxf(50, 150, 150, 250)")
        .pos(20, 135)
        .mes("   .mes(\"Hello!\");");

    // マゼンタの四角形（メソッドチェーン）
    win1.color(255, 0, 255)
        .boxf(50, 180, 150, 280);

    // シアンの四角形
    win1.color(0, 255, 255)
        .boxf(100, 220, 200, 320);

    // 黄色の四角形
    win1.color(255, 255, 0)
        .boxf(150, 260, 250, 360);

    // ラベル（全てチェーン）
    win1.color(0, 0, 0)
        .pos(60, 200)
        .mes("C++!");

    win1.redraw(1);  // 画面に反映

    // ═══════════════════════════════════════════════════════════════
    // 両方のスタイルは完全に混在可能！
    // ═══════════════════════════════════════════════════════════════
    // 
    // - HSP から移植するときは HSP スタイルで
    // - 新規開発では OOP スタイルで
    // - 同じプロジェクト内で使い分けてもOK
    //
    // win1.select();   // win1 をカレントにして
    // color(255, 0, 0); // グローバル関数で描画することも可能
    // ═══════════════════════════════════════════════════════════════

    return 0;
}
